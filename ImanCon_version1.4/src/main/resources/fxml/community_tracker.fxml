<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.*?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ListView?>
<?import javafx.scene.control.TextArea?>
<?import javafx.scene.control.ToggleButton?>
<?import javafx.scene.control.ToggleGroup?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.text.Font?>
<?import javafx.scene.control.ScrollPane?>

<VBox xmlns="http://javafx.com/javafx/17" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.faithapp.controllers.CommunityTrackerController" 
      styleClass="community-tracker" spacing="20">
    <padding>
        <Insets top="20" right="20" bottom="20" left="20" />
    </padding>
    
    <!-- Header Section -->
    <HBox alignment="CENTER_LEFT" spacing="20">
        <Label fx:id="communityTypeLabel" text="Your Community" styleClass="community-type-label" />
        <Region HBox.hgrow="ALWAYS" />
        <Button fx:id="backButton" text="â† Back to Dashboard" onAction="#handleBack" styleClass="back-button" />
    </HBox>
    
    <!-- Community Content -->
    <BorderPane fx:id="communityContent" styleClass="community-content">
        
        <!-- Left Panel - Community Members -->
        <left>
            <VBox spacing="15" styleClass="members-section" minWidth="280" maxWidth="320">
                <HBox alignment="CENTER_LEFT" spacing="10">
                    <Label text="ðŸ‘¥ Community Members" styleClass="section-title" />
                    <Region HBox.hgrow="ALWAYS" />
                    <Label fx:id="memberCountLabel" text="0 members" styleClass="member-count" />
                </HBox>
                
                <ListView fx:id="communityMembersList" styleClass="members-list" VBox.vgrow="ALWAYS" />
                
                <!-- Community Statistics -->
                <VBox spacing="10" styleClass="community-stats">
                    <Label text="ðŸ“Š Community Statistics" styleClass="section-title" />
                    <Label fx:id="activeUsersLabel" text="Active Users: 0" styleClass="stat-label" />
                    <Label fx:id="totalMessagesLabel" text="Total Messages: 0" styleClass="stat-label" />
                    <Label fx:id="communityCreatedLabel" text="Created: Today" styleClass="stat-label" />
                </VBox>
            </VBox>
        </left>
        
        <!-- Center Panel - Community Messages -->
        <center>
            <VBox spacing="15">
                <HBox alignment="CENTER_LEFT" spacing="10">
                    <Label text="ðŸ’¬ Community Messages" styleClass="section-title" />
                    <Region HBox.hgrow="ALWAYS" />
                    <Button fx:id="initializeCommunitiesButton" text="ðŸ—ï¸ Initialize Communities" onAction="#handleInitializeCommunities" styleClass="secondary-button" />
                    <Button fx:id="personalChatButton" text="ðŸ’¬ Personal Chat" onAction="#handlePersonalChat" styleClass="primary-button" />
                    <Button fx:id="refreshButton" text="â†» Refresh" onAction="#handleRefresh" styleClass="secondary-button" />
                </HBox>
                
                <ListView fx:id="communityMessagesList" styleClass="messages-list" VBox.vgrow="ALWAYS" />
                
                <!-- Message Input Section -->
                <VBox spacing="10" styleClass="message-input-section">
                    <Label text="âœï¸ Post a Message" styleClass="input-label" />
                    <TextArea fx:id="messageTextArea" promptText="Type your message here..." styleClass="message-textarea" />
                    <HBox alignment="CENTER_RIGHT" spacing="10">
                        <Region HBox.hgrow="ALWAYS" />
                        <Button fx:id="postMessageButton" text="ðŸ“¤ Post Message" onAction="#handlePostMessage" styleClass="primary-button" />
                    </HBox>
                </VBox>
            </VBox>
        </center>
        
        <!-- Right Panel - Personal Chat -->
        <right>
            <VBox spacing="15" styleClass="personal-chat-section" minWidth="280" maxWidth="320">
                <Label text="ðŸ’­ Personal Chat" styleClass="section-title" />
                
                <!-- Users List for Personal Chat -->
                <ListView fx:id="usersList" styleClass="users-list" VBox.vgrow="ALWAYS" />
                
                <!-- Personal Chat Area -->
                <VBox fx:id="personalChatArea" spacing="10" styleClass="personal-chat-area" visible="false" managed="false">
                    <Label fx:id="chatWithLabel" text="Chat with: " styleClass="chat-with-label" />
                    
                    <ListView fx:id="personalMessagesList" styleClass="personal-messages-list" VBox.vgrow="ALWAYS" />
                    
                    <TextArea fx:id="personalMessageTextArea" promptText="Type your private message..." styleClass="personal-message-textarea" />
                    
                    <HBox alignment="CENTER_RIGHT" spacing="10">
                        <Region HBox.hgrow="ALWAYS" />
                        <Button fx:id="backToCommunityButton" text="â† Back to Community" onAction="#handleBackToCommunity" styleClass="secondary-button" />
                        <Button fx:id="sendPersonalMessageButton" text="ðŸ“¤ Send" onAction="#handleSendPersonalMessage" styleClass="primary-button" />
                    </HBox>
                </VBox>
            </VBox>
        </right>
        
    </BorderPane>
    
</VBox> 